// MARKUP:
//
//<div class="slider">   <---- this class required
// <ul>
//   <li></li>
//   <li></li>
//   <li></li>
// </ul>
//</div>
(function(a,b,c,d){var e={dependencies:[{test:typeof iScroll,yep:"/moves/javascripts/libs/iscroll.js",callback:function(){console.log("loaded iScroll")}}]};M.Slider=new Class(e),M.Slider.defaults={onresize:function(){},iScroll:{scrollbarClass:"scroll",snap:!0,momentum:!1,hScrollbar:!1,vScrollbar:!1,scrollV:!1,onScrollEnd:function(){this.M_Slider.pager_items.removeClass("active").eq(this.currPageX).addClass("active")}}},M.Slider.include({before_init:function(c,d){var e=this;this.options=a.extend({},M.Slider.defaults,d),this.element=c,this.slides=c.find("ul > li"),this.slides_length=this.slides.length,a(b).on("resize",a.proxy(this.resize,this)),console.log("init",this.element),this.createNextPrevNav(),this.createPager(),this.setSlidesWidths()},init:function(a,b){this.iScroll=new iScroll(this.element[0],this.options.iScroll),this.iScroll.M_Slider=this,console.log("iScroll",this.iScroll)},setSlidesWidths:function(){this.element.find("ul > li").css("width",this.element.width())},createPager:function(){var b=function(b){return console.log(b),this.goTo(a(b.target).attr("href").replace("#","")),!1},c="";for(var d=0;d<this.slides_length;d++)c=c+'<a href="#'+d+'">'+d+"</a>";return this.pager=a('<nav class="slider-pager" />').html(c).appendTo(this.element),this.pager_items=this.pager.find("a"),this.pager_items.first().addClass("active"),this.pager.on("tap","a",a.proxy(b,this)),this.pager},createNextPrevNav:function(){var b=this,c='<a href="#prev" class="slider-arrow slider-arrow-prev" data-increment="-1">Prev</a>';return c+='<a href="#next" class="slider-arrow slider-arrow-next" data-increment="+1">Next</a>',this.nav=a('<nav class="slider-nav" />').html(c).appendTo(this.element),this.nav.on("tap","a",function(){var c=parseInt(b.iScroll.currPageX)+parseInt(a(this).attr("data-increment"));b.goTo(c)}),this.nav},goTo:function(a){this.iScroll.scrollToPage(a,0,800)},resize:function(){this.setSlidesWidths(),this.iScroll.refresh(),this.options.onresize.call(this,this.viewport_calculated_height,this.page_sections_content_heights),console.log("resize")}})})($,window,document);